(this["webpackJsonpgame-in-dots"]=this["webpackJsonpgame-in-dots"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(21)},,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),i=a.n(s),o=(a(15),a(1)),c=a.n(o),m=a(2),l=a(3),u=a(5),d=a(4),p=a(6),g=(a(17),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},a.chaningMode=function(e){a.props.setGameFinished(!1),a.props.setGameMode(e)},a.onButtonClick=function(){a.props.setGameFinished(!1),a.props.setGameInProgress(!0),a.props.onNameChange(a.state.name)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.gameSettings,n=t.gameInProgress,s=t.gameFinished,i=t.gameMode;return r.a.createElement("nav",{className:"bg-transparent navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("select",{className:"custom-select text-white",disabled:n,onChange:this.chaningMode},r.a.createElement("option",null,"Pick game mode"),a&&Object.keys(a).map((function(e){return r.a.createElement("option",{key:a[e].modeName,value:a[e].modeName},a[e].modeName)}))),r.a.createElement("input",{className:"form-control mr-sm-2",onChange:function(t){e.setState({name:t.currentTarget.value.trim()})},value:this.state.name,disabled:n,type:"text"}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",disabled:!this.state.name||n||!i,onClick:this.onButtonClick},s?"Play again":"Play"))}}]),t}(n.Component)),h=a(7),f=(a(18),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).updateField=function(){a.setState({fields:[],currentField:{},computerScore:0,playerScore:0}),a.createFields()},a.gameStartAndFail=function(){if(a.state.computerScore>=Math.floor(a.state.fields.length/2)||a.state.playerScore>=Math.floor(a.state.fields.length/2))return a.props.setGameFinished(!0),a.props.setGameInProgress(!1),a.state.computerScore>a.state.playerScore?a.props.setWinnerName("Computer AI"):a.props.setWinnerName(a.props.playerName);var e=Object(h.a)(a.state.fields),t=e[Math.floor(Math.random()*e.length)];if(t.failed||t.won)return a.gameStartAndFail();t.inAction=!0,a.setState({fields:e,currentField:t}),setTimeout((function(){if(!0!==t.won&&!1!==t.inAction){var n=a.state.computerScore;n+=1,t.inAction=!1,t.failed=!0,a.computerScore+=1,a.setState({fields:e,computerScore:n}),a.gameStartAndFail()}}),a.props.gameMode.delay)},a.gameWin=function(e){if(a.props.gameInProgress){var t=Object(h.a)(a.state.fields);if(t.find((function(t){return t.key===e.key}))===a.state.currentField){var n=a.state.playerScore;n+=1,t["".concat(e.key)].won=!0,t["".concat(e.key)].inAction=!1,a.setState({fields:t,playerScore:n},a.gameStartAndFail())}else{var r=a.state.computerScore;r+=1;var s=t["".concat(a.state.currentField.key)];t["".concat(s.key)].failed=!0,t["".concat(s.key)].inAction=!1,a.setState({fields:t,computerScore:r},a.gameStartAndFail())}}},a.state={fields:[],currentField:{},computerScore:0,playerScore:0},a.element=r.a.createRef(),a.width=0,a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"createFields",value:function(){for(var e=[],t=0;t<Math.pow(this.props.gameMode.field,2);t++)e["".concat(t)]={failed:!1,won:!1,inAction:!1,key:"".concat(t)};this.setState({fields:e})}},{key:"componentDidMount",value:function(){this.createFields(),this.width=this.element.current.offsetWidth}},{key:"componentDidUpdate",value:function(e){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props===e){t.next=7;break}if(this.props.gameMode!==e.gameMode&&this.updateField(),!this.props.gameInProgress||this.props.gameFinished){t.next=7;break}return t.next=5,c.a.awrap(this.updateField());case 5:this.gameStartAndFail(),this.width=this.element.current.offsetWidth;case 7:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state.fields,a=this.props,n=a.gameMode,s=a.winnerName,i=a.gameFinished;return r.a.createElement("section",{className:"playing-area"},s&&i?r.a.createElement("h2",{className:"playing-area__winner-name"},s," won"):r.a.createElement("span",{className:"playing-area__winner-name"}),r.a.createElement("div",{ref:this.element,className:"playing-area__field",style:{gridTemplateColumns:"repeat(".concat(n.field,", 1fr)"),height:this.width}},t.map((function(t){return r.a.createElement("div",{className:"playing-area__field-element",key:t.key,style:t.inAction?{backgroundColor:"blue"}:t.failed?{backgroundColor:"red"}:t.won?{backgroundColor:"green"}:{backgroundColor:"white"},onClick:function(){return e.gameWin(t)}})}))))}}]),t}(n.Component)),y=(a(19),a(20),"https://starnavi-frontend-test-task.herokuapp.com/game-settings"),v=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={gameSettings:{},gameMode:null,playerName:"",gameInProgress:!1,gameFinished:!1,winnerName:""},a.getGameSettingsData=function(){var e,t,n;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.a.awrap(fetch(y));case 3:return e=r.sent,r.next=6,c.a.awrap(e.json());case 6:for(n in t=r.sent)t.hasOwnProperty(n)&&(t[n].modeName=n);a.setState({gameSettings:t}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.error(r.t0);case 14:case"end":return r.stop()}}),null,null,[[0,11]])},a.setGameModeValue=function(e){var t=Object.values(a.state.gameSettings).find((function(t){return t.modeName===e.currentTarget.value}));a.setState({gameMode:t})},a.onNameChange=function(e){a.setState({playerName:e})},a.setGameInProgress=function(e){var t=e;a.setState({gameInProgress:t})},a.setGameFinished=function(e){var t=e;a.setState({gameFinished:t})},a.setWinnerName=function(e){a.setState({winnerName:e})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getGameSettingsData()}},{key:"render",value:function(){var e=this.state,t=e.gameMode,a=e.winnerName,n=e.playerName,s=e.gameSettings,i=e.gameFinished,o=e.gameInProgress;return r.a.createElement("div",{className:"App"},r.a.createElement("section",{className:"gaming-section"},r.a.createElement(g,{gameMode:t,playerName:n,gameFinished:i,gameSettings:s,gameInProgress:o,onNameChange:this.onNameChange,setGameMode:this.setGameModeValue,setGameFinished:this.setGameFinished,setGameInProgress:this.setGameInProgress}),t&&r.a.createElement(f,{gameMode:t,winnerName:a,playerName:n,gameFinished:i,gameInProgress:o,setWinnerName:this.setWinnerName,setGameFinished:this.setGameFinished,setGameInProgress:this.setGameInProgress})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[10,1,2]]]);
//# sourceMappingURL=main.95c2474d.chunk.js.map