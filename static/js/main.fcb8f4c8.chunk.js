(this["webpackJsonpgame-in-dots"]=this["webpackJsonpgame-in-dots"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(23)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(10),i=n.n(s),o=(n(16),n(1)),c=n.n(o),m=n(2),l=n(3),u=n(5),d=n(4),p=n(6),h=(n(18),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={name:""},n.chaningMode=function(e){n.props.setGameFinished(!1),n.props.setGameMode(e)},n.onButtonClick=function(){n.props.setGameFinished(!1),n.props.setGameInProgress(!0),n.props.onNameChange(n.state.name)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.gameSettings,a=t.gameInProgress,s=t.gameFinished,i=t.gameMode;return r.a.createElement("nav",{className:"bg-transparent navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("select",{className:"custom-select text-white",disabled:a,onChange:this.chaningMode},r.a.createElement("option",null,"Pick game mode"),n&&Object.keys(n).map((function(e){return r.a.createElement("option",{key:n[e].modeName,value:n[e].modeName},n[e].modeName)}))),r.a.createElement("input",{className:"form-control mr-sm-2",onChange:function(t){e.setState({name:t.currentTarget.value.trim()})},value:this.state.name,disabled:a,type:"text"}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",disabled:!this.state.name||a||!i,onClick:this.onButtonClick},s?"Play again":"Play"))}}]),t}(a.Component)),g=n(8),f=(n(19),function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).updateField=function(){n.setState({fields:[],currentField:{},computerScore:0,playerScore:0}),n.createFields()},n.gameStartAndFail=function(){if(n.state.computerScore>=Math.floor(n.state.fields.length/2)||n.state.playerScore>=Math.floor(n.state.fields.length/2))return n.props.setGameFinished(!0),n.props.setGameInProgress(!1),n.state.computerScore>n.state.playerScore?n.props.setWinnerName("Computer AI"):n.props.setWinnerName(n.props.playerName);var e=Object(g.a)(n.state.fields),t=e[Math.floor(Math.random()*e.length)];if(t.failed||t.won)return n.gameStartAndFail();t.inAction=!0,n.setState({fields:e,currentField:t}),setTimeout((function(){if(!0!==t.won&&!1!==t.inAction){var a=n.state.computerScore;a+=1,t.inAction=!1,t.failed=!0,n.computerScore+=1,n.setState({fields:e,computerScore:a}),n.gameStartAndFail()}}),n.props.gameMode.delay)},n.gameWin=function(e){if(n.props.gameInProgress){var t=Object(g.a)(n.state.fields);if(t.find((function(t){return t.key===e.key}))===n.state.currentField){var a=n.state.playerScore;a+=1,t["".concat(e.key)].won=!0,t["".concat(e.key)].inAction=!1,n.setState({fields:t,playerScore:a},n.gameStartAndFail())}else{var r=n.state.computerScore;r+=1;var s=t["".concat(n.state.currentField.key)];t["".concat(s.key)].failed=!0,t["".concat(s.key)].inAction=!1,n.setState({fields:t,computerScore:r},n.gameStartAndFail())}}},n.state={fields:[],currentField:{},computerScore:0,playerScore:0},n.element=r.a.createRef(),n.width=0,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"createFields",value:function(){for(var e=[],t=0;t<Math.pow(this.props.gameMode.field,2);t++)e["".concat(t)]={failed:!1,won:!1,inAction:!1,key:"".concat(t)};this.setState({fields:e})}},{key:"componentDidMount",value:function(){this.createFields(),this.width=this.element.current.offsetWidth}},{key:"componentDidUpdate",value:function(e){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.props===e){t.next=7;break}if(this.props.gameMode!==e.gameMode&&this.updateField(),!this.props.gameInProgress||this.props.gameFinished){t.next=7;break}return t.next=5,c.a.awrap(this.updateField());case 5:this.gameStartAndFail(),this.width=this.element.current.offsetWidth;case 7:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state.fields,n=this.props,a=n.gameMode,s=n.winnerName,i=n.gameFinished;return r.a.createElement("section",{className:"playing-area"},s&&i?r.a.createElement("h2",{className:"playing-area__winner-name"},s," won"):r.a.createElement("span",{className:"playing-area__winner-name"}),r.a.createElement("div",{ref:this.element,className:"playing-area__field",style:{gridTemplateColumns:"repeat(".concat(a.field,", 1fr)"),height:this.width}},t.map((function(t){return r.a.createElement("div",{className:"playing-area__field-element",key:t.key,style:t.inAction?{backgroundColor:"blue"}:t.failed?{backgroundColor:"red"}:t.won?{backgroundColor:"green"}:{backgroundColor:"white"},onClick:function(){return e.gameWin(t)}})}))))}}]),t}(a.Component)),v=n(7),y=n.n(v),w=(n(21),"https://starnavi-frontend-test-task.herokuapp.com/winners"),b=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={winnersList:[],sent:!1},n.getWinnersList=function(){var e,t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.awrap(fetch(w));case 3:return e=a.sent,a.next=6,c.a.awrap(e.json());case 6:t=a.sent,n.setState({winnersList:t}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.error(a.t0);case 13:case"end":return a.stop()}}),null,null,[[0,10]])},n.sendWinnerAndUpdate=function(e){if(n.props.gameFinished){var t={winner:e,date:y()().format("H:mm; D MMMM YYYY"),id:Math.random()};fetch(w,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return n.setState({winnersList:e})}))}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getWinnersList(),setInterval(this.getWinnersList,1e5)}},{key:"componentWillUnmount",value:function(){clearInterval(this.getWinnersList,1e5)}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.sendWinnerAndUpdate(this.props.winnerName)}},{key:"render",value:function(){var e=this.state.winnersList;return r.a.createElement("section",{className:"winner-list"},r.a.createElement("h1",{className:"winner-list__header"},"Leader Board"),r.a.createElement("ul",{className:"winner-list__list"},e.map((function(e){return r.a.createElement("div",{className:" winner-list__list-element",key:e.id},r.a.createElement("div",{className:"winner-list__list-element-name"},e.winner),r.a.createElement("div",{className:"winner-list__list-element-date"},y()(e.date,"H:mm; D MMMM YYYY").format("D MMMM YYYY, H:mm")||e.date))}))))}}]),t}(a.Component),S=(n(22),"https://starnavi-frontend-test-task.herokuapp.com/game-settings"),k=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={gameSettings:{},gameMode:null,playerName:"",gameInProgress:!1,gameFinished:!1,winnerName:""},n.getGameSettingsData=function(){var e,t,a;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.a.awrap(fetch(S));case 3:return e=r.sent,r.next=6,c.a.awrap(e.json());case 6:for(a in t=r.sent)t.hasOwnProperty(a)&&(t[a].modeName=a);n.setState({gameSettings:t}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.error(r.t0);case 14:case"end":return r.stop()}}),null,null,[[0,11]])},n.setGameModeValue=function(e){var t=Object.values(n.state.gameSettings).find((function(t){return t.modeName===e.currentTarget.value}));n.setState({gameMode:t})},n.onNameChange=function(e){n.setState({playerName:e})},n.setGameInProgress=function(e){var t=e;n.setState({gameInProgress:t})},n.setGameFinished=function(e){var t=e;n.setState({gameFinished:t})},n.setWinnerName=function(e){n.setState({winnerName:e})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getGameSettingsData()}},{key:"render",value:function(){var e=this.state,t=e.gameMode,n=e.winnerName,a=e.playerName,s=e.gameSettings,i=e.gameFinished,o=e.gameInProgress;return r.a.createElement("div",{className:"App"},r.a.createElement("section",{className:"gaming-section"},r.a.createElement(h,{gameMode:t,playerName:a,gameFinished:i,gameSettings:s,gameInProgress:o,onNameChange:this.onNameChange,setGameMode:this.setGameModeValue,setGameFinished:this.setGameFinished,setGameInProgress:this.setGameInProgress}),t&&r.a.createElement(f,{gameMode:t,winnerName:n,playerName:a,gameFinished:i,gameInProgress:o,setWinnerName:this.setWinnerName,setGameFinished:this.setGameFinished,setGameInProgress:this.setGameInProgress})),r.a.createElement(b,{winnerName:n,gameFinished:i}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[11,1,2]]]);
//# sourceMappingURL=main.fcb8f4c8.chunk.js.map