(this["webpackJsonpgame-in-dots"]=this["webpackJsonpgame-in-dots"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(9),i=n.n(s),o=(n(15),n(6)),c=n.n(o),m=n(1),l=n(2),u=n(4),d=n(3),p=n(5),h=(n(17),function(e){function t(){return Object(m.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.gameSettings,n=e.setGameMode,a=e.onNameChange,s=e.playerName,i=e.setGameInProgress,o=e.gameInProgress,c=e.setGameFinished,m=e.gameFinished,l=e.setWinnerName,u=e.gameMode;return r.a.createElement("nav",{className:"bg-transparent navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("select",{className:"custom-select text-white",disabled:o,onChange:function(e){return n(e)},name:"",id:""},r.a.createElement("option",null,"Pick game mode"),t&&Object.keys(t).map((function(e){return r.a.createElement("option",{key:t[e].modeName,value:t[e].modeName},t[e].modeName)}))),r.a.createElement("input",{className:"form-control mr-sm-2",value:s,onChange:a,disabled:o,type:"text"}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",disabled:!s||o||!u,onClick:function(){c(!1),i(!0),l("")}},m?"Replay":"Play"))}}]),t}(a.Component)),g=n(7),f=(n(18),function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).gameStartAndFail=function(){if(n.state.computerScore>=Math.round(n.state.fields.length/2)-1||n.state.playerScore>=Math.round(n.state.fields.length/2)-1)return n.props.setGameFinished(!0),n.props.setGameInProgress(!1),n.state.computerScore>n.state.playerScore?n.props.setWinnerName("Computer AI"):n.props.setWinnerName(n.props.playerName);var e=Object(g.a)(n.state.fields),t=e[Math.floor(Math.random()*e.length)];if(t.failed||t.won)return n.gameStartAndFail();t.inAction=!0,n.setState({fields:e,currentField:t}),setTimeout((function(){if(!0!==t.won&&!1!==t.inAction){var a=n.state.computerScore;a+=1,t.inAction=!1,t.failed=!0,n.computerScore+=1,n.setState({fields:e,computerScore:a}),n.gameStartAndFail()}}),n.props.gameMode.delay)},n.gameWin=function(e){if(n.props.gameInProgress){var t=Object(g.a)(n.state.fields);if(t.find((function(t){return t.key===e.key}))===n.state.currentField){var a=n.state.playerScore;a+=1,t["".concat(e.key)].won=!0,t["".concat(e.key)].inAction=!1,n.setState({fields:t,playerScore:a},n.gameStartAndFail())}else{var r=n.state.computerScore;r+=1;var s=t["".concat(n.state.currentField.key)];t["".concat(s.key)].failed=!0,t["".concat(s.key)].inAction=!1,n.setState({fields:t,computerScore:r},n.gameStartAndFail())}}},n.state={fields:[],currentField:{},computerScore:0,playerScore:0},n.element=r.a.createRef(),n.width=0,n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"createFields",value:function(){for(var e=[],t=0;t<Math.pow(this.props.gameMode.field,2);t++)e["".concat(t)]={failed:!1,won:!1,inAction:!1,key:"".concat(t)};this.setState({fields:e})}},{key:"componentDidMount",value:function(){this.createFields(),this.width=this.element.current.offsetWidth}},{key:"componentDidUpdate",value:function(e){this.props!==e&&(this.setState({fields:[],currentField:{},computerScore:0,playerScore:0}),this.createFields(),this.props.gameInProgress&&!this.props.gameFinished&&(this.gameStartAndFail(),this.width=this.element.current.offsetWidth))}},{key:"render",value:function(){var e=this,t=this.state.fields,n=this.props,a=n.gameMode,s=n.winnerName;return r.a.createElement("section",{className:"playing-area"},s?r.a.createElement("h2",{className:"playing-area__winner-name"},s," won"):r.a.createElement("span",{className:"playing-area__winner-name"}),r.a.createElement("div",{ref:this.element,className:"playing-area__field",style:{gridTemplateColumns:"repeat(".concat(a.field,", 1fr)"),height:this.width}},t.map((function(t){return r.a.createElement("div",{className:"playing-area__field-element",key:t.key,style:t.inAction?{backgroundColor:"blue"}:t.failed?{backgroundColor:"red"}:t.won?{backgroundColor:"green"}:{backgroundColor:"white"},onClick:function(){return e.gameWin(t)}})}))))}}]),t}(a.Component)),v=(n(19),"https://starnavi-frontend-test-task.herokuapp.com/winners"),y=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={winnersList:[]},n.getWinnersList=function(){var e,t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,c.a.awrap(fetch(v));case 3:return e=a.sent,a.next=6,c.a.awrap(e.json());case 6:t=a.sent,n.setState({winnersList:t}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.error(a.t0);case 13:case"end":return a.stop()}}),null,null,[[0,10]])},n.onSomeoneWins=function(e){if(n.props.gameFinished){var t={winner:e,date:new Date};console.log(JSON.stringify(t))}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getWinnersList()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.onSomeoneWins(this.props.winnerName)}},{key:"render",value:function(){var e=this.state.winnersList;return r.a.createElement("section",{className:"winner-list"},r.a.createElement("h1",{className:"winner-list__header"},"Leader Board"),r.a.createElement("ul",{className:"winner-list__list"},e.map((function(e){return r.a.createElement("div",{className:" winner-list__list-element",key:e.id},r.a.createElement("div",{className:"winner-list__list-element-name"},e.winner),r.a.createElement("div",{className:"winner-list__list-element-date"},e.date))}))))}}]),t}(a.Component),w=(n(20),"https://starnavi-frontend-test-task.herokuapp.com/game-settings"),N=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={gameSettings:{},gameMode:null,playerName:"",gameInProgress:!1,gameFinished:!1,winnerName:""},n.getGameSettingsData=function(){var e,t,a;return c.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c.a.awrap(fetch(w));case 3:return e=r.sent,r.next=6,c.a.awrap(e.json());case 6:for(a in t=r.sent)t.hasOwnProperty(a)&&(t[a].modeName=a);n.setState({gameSettings:t}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),console.error(r.t0);case 14:case"end":return r.stop()}}),null,null,[[0,11]])},n.setGameModeValue=function(e){var t=Object.values(n.state.gameSettings).find((function(t){return t.modeName===e.currentTarget.value}));n.setState({gameMode:t})},n.onNameChange=function(e){n.setState({playerName:e.currentTarget.value})},n.setGameInProgress=function(e){var t=e;n.setState({gameInProgress:t})},n.setGameFinished=function(e){var t=e;n.setState({gameFinished:t})},n.setWinnerName=function(e){n.setState({winnerName:e})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getGameSettingsData()}},{key:"render",value:function(){var e=this.state,t=e.gameSettings,n=e.playerName,a=e.gameMode,s=e.gameInProgress,i=e.gameFinished,o=e.winnerName;return r.a.createElement("div",{className:"App"},r.a.createElement("section",{className:"gaming-section"},r.a.createElement(h,{gameSettings:t,setGameMode:this.setGameModeValue,gameMode:a,onNameChange:this.onNameChange,playerName:n,setGameInProgress:this.setGameInProgress,gameInProgress:s,setGameFinished:this.setGameFinished,gameFinished:i,setWinnerName:this.setWinnerName}),a&&r.a.createElement(f,{setGameFinished:this.setGameFinished,setGameInProgress:this.setGameInProgress,gameFinished:i,gameMode:a,gameInProgress:s,winnerName:o,setWinnerName:this.setWinnerName,playerName:n})),r.a.createElement(y,{winnerName:o,gameFinished:i}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[10,1,2]]]);
//# sourceMappingURL=main.669001ae.chunk.js.map